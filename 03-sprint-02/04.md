### üî• **Tutoriel complet : R√©cup√©rer un Token apr√®s authentification**  

L'endpoint `/api/v1/auth/token` permet √† l'utilisateur de s'authentifier et de recevoir un **JWT Token** qu'il pourra utiliser pour les requ√™tes s√©curis√©es.


## **1Ô∏è‚É£ Tester avec VS Code (REST Client)**
Ajoute la requ√™te suivante dans un fichier **`token.http`** ou **`token.rest`** :

```http
POST http://localhost:8085/api/v1/auth/token
Content-Type: application/json

{
  "email": "rhoumahaythem@gmail.com",
  "password": "Spring123$"
}
```
### üìå **√âtapes** :
1. **Installer l'extension REST Client** si ce n'est pas encore fait.
2. **Cr√©er le fichier `.http` ou `.rest`**.
3. **Lancer la requ√™te en cliquant sur "Send Request"**.



## **2Ô∏è‚É£ Tester avec cURL (Terminal / CMD)**
### üìå **Commande :**
```sh
curl -X POST "http://localhost:8085/api/v1/auth/token" \
     -H "Content-Type: application/json" \
     -d '{
           "email": "rhoumahaythem@gmail.com",
           "password": "Spring123$"
         }'
```
### üìå **Ex√©cution :**
- **Windows (CMD/Powershell)** : Ex√©cute directement.
- **Linux/Mac** : Ex√©cute dans le terminal.



## **3Ô∏è‚É£ Tester avec Fetch API (JavaScript)**
### üìå **Code JavaScript :**
```js
fetch("http://localhost:8085/api/v1/auth/token", {
    method: "POST",
    headers: {
        "Content-Type": "application/json"
    },
    body: JSON.stringify({
        email: "rhoumahaythem@gmail.com",
        password: "Spring123$"
    })
})
.then(response => response.json())
.then(data => {
    console.log("Token re√ßu:", data.jwtToken);
})
.catch(error => console.error("Erreur:", error));
```
### üìå **Ex√©cuter le script :**
- **Dans le navigateur (F12 -> Console)** : Copie-colle le code.
- **Dans Node.js :**  
  1. **Cr√©er un fichier** `token.js` et y coller le code.
  2. **Ex√©cuter la commande :**  
     ```sh
     node token.js
     ```



## **üìå Exemple de R√©ponse JSON avec le Token**
Lorsqu'on envoie une requ√™te valide, l'API retourne une r√©ponse **200 OK** contenant le **JWT Token** :

```http
HTTP/1.1 200 OK
Vary: Origin, Access-Control-Request-Method, Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 0
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
X-Frame-Options: DENY
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sat, 08 Mar 2025 00:38:17 GMT
Connection: close
```
```json
{
  "user": {
    "email": "rhoumahaythem@gmail.com",
    "username": null,
    "firstName": "haythem",
    "lastName": "rehouma",
    "phoneNumber": null,
    "profilePicture": null,
    "roleTypes": "USER",
    "subscriptionList": [],
    "plan": null
  },
  "jwtToken": "eyJhbGciOiJIUzI1NiJ9.eyJyb2xlcyI6IlVTRVIiLCJlbWFpbCI6InJob3VtYWhheXRoZW1AZ21haWwuY29tIiwic3ViIjoicmhvdW1haGF5dGhlbUBnbWFpbC5jb20iLCJpYXQiOjE3NDEzOTQyOTcsImV4cCI6MTc0MTQwMTQ5N30.XswpOJQglsHteQde4AnG2RCRx-SCj8rF4d42h68RNq0"
}
```

## **‚úÖ Conclusion**
| M√©thode       | Objectif                           | Id√©al pour |
|--------------|---------------------------------|------------|
| **REST Client (VS Code)** | Tester rapidement dans une interface | D√©veloppement & tests rapides |
| **cURL (Terminal)** | Ex√©cuter en ligne de commande | Automatisation & scripts |
| **Fetch API (JavaScript)** | Int√©gration dans une application web | Front-end & back-end Node.js |

